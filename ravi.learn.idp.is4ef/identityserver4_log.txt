2018-10-20 09:59:50.600 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 09:59:50.636 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 09:59:50.637 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 09:59:50.637 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 09:59:50.637 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 10:12:13.886 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 10:12:13.911 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 10:12:13.911 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 10:12:13.912 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 10:12:13.912 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 10:12:14.246 -04:00 [DBG] Starting token cleanup
2018-10-20 10:13:31.033 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 11:11:54.332 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 11:11:54.364 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 11:11:54.365 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 11:11:54.365 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 11:11:54.366 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 11:11:54.710 -04:00 [DBG] Starting token cleanup
2018-10-20 11:12:27.040 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 11:12:33.547 -04:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-20 11:12:48.272 -04:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-20 11:12:48.306 -04:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-10-20 11:12:48.444 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "111230300226036812523",
  "SubjectId": "fc899c184d7355935f02ca3235d1c6a2803207ae44234b3e5542ab59b8ec4c65",
  "DisplayName": "Ravi Gavarasana",
  "Endpoint": "UI",
  "ActivityId": "0HLHMJPFGU81H:00000003",
  "TimeStamp": "2018-10-20T15:12:48Z",
  "ProcessId": 9256,
  "LocalIpAddress": "127.0.0.1:10881",
  "RemoteIpAddress": "::1"
}
2018-10-20 11:12:48.462 -04:00 [DBG] Augmenting SignInContext
2018-10-20 11:12:48.466 -04:00 [DBG] Adding amr claim with value: external
2018-10-20 11:12:48.476 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 11:12:48.503 -04:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-10-20 11:12:48.515 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 11:12:48.517 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 11:12:50.261 -04:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2018-10-20 11:12:50.541 -04:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
2018-10-20 11:12:50.544 -04:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAllAsync(String subjectId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\PersistedGrantStore.cs:line 93
   at IdentityServer4.Services.DefaultPersistedGrantService.GetAllGrantsAsync(String subjectId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Services\DefaultPersistedGrantService.cs:line 47
   at IdentityServer4.Services.DefaultIdentityServerInteractionService.GetAllUserConsentsAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Services\DefaultIdentityServerInteractionService.cs:line 159
   at IdentityServer4.Quickstart.UI.GrantsController.BuildViewModelAsync() in D:\code\learn\core2-oidc\ravi.learn.idp.is4ef\Quickstart\Grants\GrantsController.cs:line 64
   at IdentityServer4.Quickstart.UI.GrantsController.Index() in D:\code\learn\core2-oidc\ravi.learn.idp.is4ef\Quickstart\Grants\GrantsController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-10-20 11:16:56.244 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 11:16:56.267 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 11:16:56.268 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 11:16:56.268 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 11:16:56.268 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 11:16:56.647 -04:00 [DBG] Starting token cleanup
2018-10-20 11:17:07.325 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 11:17:13.221 -04:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-20 11:17:25.740 -04:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-20 11:17:25.769 -04:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-10-20 11:17:25.923 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "111230300226036812523",
  "SubjectId": "ba073d86563099cb350d7f4a69bee6165267ce1e4b0cb015d297adeb4aaa5ff7",
  "DisplayName": "Ravi Gavarasana",
  "Endpoint": "UI",
  "ActivityId": "0HLHMJS9GKNJC:00000003",
  "TimeStamp": "2018-10-20T15:17:25Z",
  "ProcessId": 12852,
  "LocalIpAddress": "127.0.0.1:14046",
  "RemoteIpAddress": "::1"
}
2018-10-20 11:17:25.948 -04:00 [DBG] Augmenting SignInContext
2018-10-20 11:17:25.954 -04:00 [DBG] Adding amr claim with value: external
2018-10-20 11:17:25.968 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 11:17:26.009 -04:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-10-20 11:17:26.029 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 11:17:26.031 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 11:17:28.191 -04:00 [ERR] Failed executing DbCommand (136ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[SubjectId] = @__subjectId_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:f6c16c32-8fba-4b2a-8122-e972c7216a6a
Error Number:208,State:1,Class:16
2018-10-20 11:17:28.259 -04:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:f6c16c32-8fba-4b2a-8122-e972c7216a6a
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:f6c16c32-8fba-4b2a-8122-e972c7216a6a
Error Number:208,State:1,Class:16
2018-10-20 11:18:58.546 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 11:18:58.592 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 11:18:58.593 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 11:18:58.593 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 11:18:58.594 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 11:36:35.084 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 11:36:35.106 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 11:36:35.106 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 11:36:35.106 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 11:36:35.106 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 11:44:27.738 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 11:44:27.761 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 11:44:27.761 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 11:44:27.761 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 11:44:27.761 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:47:52.031 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:47:52.054 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:47:52.055 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:47:52.055 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:47:52.055 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:47:52.383 -04:00 [DBG] Starting token cleanup
2018-10-20 15:48:02.888 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 15:48:07.639 -04:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-20 15:48:20.357 -04:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-20 15:48:20.386 -04:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-10-20 15:48:20.521 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "111230300226036812523",
  "SubjectId": "cfa077f1569a573bdff675b498d0e46b04367af715a1ee26ddd1103c4209ed6f",
  "DisplayName": "Ravi Gavarasana",
  "Endpoint": "UI",
  "ActivityId": "0HLHMOJM4N9L7:00000002",
  "TimeStamp": "2018-10-20T19:48:20Z",
  "ProcessId": 6624,
  "LocalIpAddress": "127.0.0.1:13715",
  "RemoteIpAddress": "::1"
}
2018-10-20 15:48:20.542 -04:00 [DBG] Augmenting SignInContext
2018-10-20 15:48:20.546 -04:00 [DBG] Adding amr claim with value: external
2018-10-20 15:48:20.557 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 15:48:20.582 -04:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-10-20 15:48:20.595 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 15:48:20.597 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 15:48:22.827 -04:00 [ERR] Failed executing DbCommand (140ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[SubjectId] = @__subjectId_0
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:de069cb5-25ab-40f8-91e4-d79baeac74c8
Error Number:208,State:1,Class:16
2018-10-20 15:48:22.901 -04:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:de069cb5-25ab-40f8-91e4-d79baeac74c8
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:de069cb5-25ab-40f8-91e4-d79baeac74c8
Error Number:208,State:1,Class:16
2018-10-20 15:48:23.543 -04:00 [ERR] An unhandled exception has occurred while executing the request
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(Boolean buffer)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.PersistedGrantStore.GetAllAsync(String subjectId) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Stores\PersistedGrantStore.cs:line 93
   at IdentityServer4.Services.DefaultPersistedGrantService.GetAllGrantsAsync(String subjectId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Services\DefaultPersistedGrantService.cs:line 47
   at IdentityServer4.Services.DefaultIdentityServerInteractionService.GetAllUserConsentsAsync() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Services\DefaultIdentityServerInteractionService.cs:line 159
   at IdentityServer4.Quickstart.UI.GrantsController.BuildViewModelAsync() in D:\code\learn\core2-oidc\ravi.learn.idp.is4ef\Quickstart\Grants\GrantsController.cs:line 64
   at IdentityServer4.Quickstart.UI.GrantsController.Index() in D:\code\learn\core2-oidc\ravi.learn.idp.is4ef\Quickstart\Grants\GrantsController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:de069cb5-25ab-40f8-91e4-d79baeac74c8
Error Number:208,State:1,Class:16
2018-10-20 15:50:39.929 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:50:39.959 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:50:39.960 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:50:39.960 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:50:39.962 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:52:14.782 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:52:14.807 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:52:14.808 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:52:14.809 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:52:14.811 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:52:41.840 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:52:41.865 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:52:41.866 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:52:41.866 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:52:41.868 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:53:10.141 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:53:10.167 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:53:10.168 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:53:10.169 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:53:10.171 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:53:29.906 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:53:29.932 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:53:29.933 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:53:29.933 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:53:29.935 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:56:46.928 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:56:46.956 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:56:46.957 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:56:46.958 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:56:46.959 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:57:13.241 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:57:13.264 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:57:13.265 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:57:13.266 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:57:13.267 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:57:42.507 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:57:42.532 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:57:42.533 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:57:42.533 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:57:42.535 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:58:30.752 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:58:30.776 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:58:30.777 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:58:30.777 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:58:30.780 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:58:54.868 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:58:54.892 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:58:54.892 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:58:54.894 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:58:54.896 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:59:57.708 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 15:59:57.734 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 15:59:57.734 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 15:59:57.734 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 15:59:57.734 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 15:59:58.124 -04:00 [DBG] Starting token cleanup
2018-10-20 15:59:58.728 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 15:59:58.744 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:12.891 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:12.891 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:15.055 -04:00 [DBG] 0 persisted grants found for cfa077f1569a573bdff675b498d0e46b04367af715a1ee26ddd1103c4209ed6f
2018-10-20 16:00:29.225 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:29.225 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:32.012 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:32.012 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:00:32.315 -04:00 [INF] AuthenticationScheme: idsrv signed out.
2018-10-20 16:00:32.456 -04:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "cfa077f1569a573bdff675b498d0e46b04367af715a1ee26ddd1103c4209ed6f",
  "DisplayName": "Ravi Gavarasana",
  "ActivityId": "0HLHMOQEE8Q5V:00000003",
  "TimeStamp": "2018-10-20T20:00:32Z",
  "ProcessId": 15312,
  "LocalIpAddress": "127.0.0.1:24413",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:01:37.455 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 16:01:40.416 -04:00 [INF] AuthenticationScheme: Google was challenged.
2018-10-20 16:01:41.716 -04:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-10-20 16:01:41.753 -04:00 [INF] AuthenticationScheme: idsrv.external was successfully authenticated.
2018-10-20 16:01:41.822 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "111230300226036812523",
  "SubjectId": "960c5862ecb4313b85f79018dbcc76c64c8b3794098e765aecbc5c9b12fcdc77",
  "DisplayName": "Ravi Gavarasana",
  "Endpoint": "UI",
  "ActivityId": "0HLHMOQEE8Q61:00000006",
  "TimeStamp": "2018-10-20T20:01:41Z",
  "ProcessId": 15312,
  "LocalIpAddress": "127.0.0.1:24413",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:01:41.843 -04:00 [DBG] Augmenting SignInContext
2018-10-20 16:01:41.846 -04:00 [DBG] Adding amr claim with value: external
2018-10-20 16:01:41.851 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 16:01:41.853 -04:00 [INF] AuthenticationScheme: idsrv.external signed out.
2018-10-20 16:01:41.868 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:41.868 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:41.906 -04:00 [DBG] 0 persisted grants found for 960c5862ecb4313b85f79018dbcc76c64c8b3794098e765aecbc5c9b12fcdc77
2018-10-20 16:01:48.427 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:48.427 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:49.613 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:49.613 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:01:49.614 -04:00 [INF] AuthenticationScheme: idsrv signed out.
2018-10-20 16:01:49.614 -04:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "960c5862ecb4313b85f79018dbcc76c64c8b3794098e765aecbc5c9b12fcdc77",
  "DisplayName": "Ravi Gavarasana",
  "ActivityId": "0HLHMOQEE8Q61:00000009",
  "TimeStamp": "2018-10-20T20:01:49Z",
  "ProcessId": 15312,
  "LocalIpAddress": "127.0.0.1:24413",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:02:48.290 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 16:02:48.327 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 16:02:48.327 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 16:02:48.328 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 16:02:48.328 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 16:02:48.683 -04:00 [DBG] Starting token cleanup
2018-10-20 16:04:04.043 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 16:04:04.068 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 16:04:04.068 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 16:04:04.068 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 16:04:04.068 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 16:04:25.842 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 16:04:25.865 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 16:04:25.866 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 16:04:25.866 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 16:04:25.866 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 16:04:26.198 -04:00 [DBG] Starting token cleanup
2018-10-20 16:05:04.421 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-20 16:05:04.446 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-20 16:05:04.446 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-20 16:05:04.446 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-20 16:05:04.446 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-20 16:05:04.815 -04:00 [DBG] Starting token cleanup
2018-10-20 16:05:14.563 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 16:05:40.174 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "818727",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLHMOT9RM85I:00000002",
  "TimeStamp": "2018-10-20T20:05:40Z",
  "ProcessId": 4996,
  "LocalIpAddress": "127.0.0.1:23207",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:05:40.188 -04:00 [DBG] Augmenting SignInContext
2018-10-20 16:05:40.190 -04:00 [DBG] Adding idp claim with value: local
2018-10-20 16:05:40.190 -04:00 [DBG] Adding amr claim with value: pwd
2018-10-20 16:05:40.217 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 16:05:40.237 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:40.237 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:41.407 -04:00 [DBG] 0 persisted grants found for 818727
2018-10-20 16:05:50.321 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:50.321 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:51.415 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:51.415 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:05:51.456 -04:00 [INF] AuthenticationScheme: idsrv signed out.
2018-10-20 16:05:51.468 -04:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "818727",
  "DisplayName": "alice",
  "ActivityId": "0HLHMOT9RM85E:00000004",
  "TimeStamp": "2018-10-20T20:05:51Z",
  "ProcessId": 4996,
  "LocalIpAddress": "127.0.0.1:23207",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:06:05.145 -04:00 [INF] AuthenticationScheme: idsrv was challenged.
2018-10-20 16:06:09.045 -04:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "88421113",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLHMOT9RM85F:00000003",
  "TimeStamp": "2018-10-20T20:06:09Z",
  "ProcessId": 4996,
  "LocalIpAddress": "127.0.0.1:23207",
  "RemoteIpAddress": "::1"
}
2018-10-20 16:06:09.045 -04:00 [DBG] Augmenting SignInContext
2018-10-20 16:06:09.045 -04:00 [DBG] Adding idp claim with value: local
2018-10-20 16:06:09.046 -04:00 [DBG] Adding amr claim with value: pwd
2018-10-20 16:06:09.046 -04:00 [INF] AuthenticationScheme: idsrv signed in.
2018-10-20 16:06:09.056 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:06:09.057 -04:00 [INF] AuthenticationScheme: idsrv was successfully authenticated.
2018-10-20 16:06:09.072 -04:00 [DBG] 0 persisted grants found for 88421113
2018-10-24 20:27:04.786 -04:00 [DBG] Using idsrv as default scheme for authentication
2018-10-24 20:27:04.815 -04:00 [DBG] Using idsrv as default scheme for sign-in
2018-10-24 20:27:04.816 -04:00 [DBG] Using idsrv as default scheme for sign-out
2018-10-24 20:27:04.816 -04:00 [DBG] Using idsrv as default scheme for challenge
2018-10-24 20:27:04.816 -04:00 [DBG] Using idsrv as default scheme for forbid
2018-10-24 20:27:05.233 -04:00 [DBG] Starting token cleanup
